{%- comment -%}
  Magic Mind Button Snippet
  Usage: {% render 'magic-mind-button', button_label: 'Shop now', button_link: '/', ... %}
{%- endcomment -%}

{%- liquid
  assign unique_id = unique_id | default: 'mm-btn'
  assign button_label = button_label | default: 'Button'
  assign button_link = button_link | default: ''
  assign open_in_new_tab = open_in_new_tab | default: false
  assign text_alignment = text_alignment | default: 'center'
  assign padding_horizontal = padding_horizontal | default: 32
  assign padding_vertical = padding_vertical | default: 14
  assign margin_top = margin_top | default: 0
  assign margin_bottom = margin_bottom | default: 0
  assign full_width_mobile = full_width_mobile | default: false
-%}

<style>
  .mm-style-btn-{{ unique_id }} {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: {{ text_alignment }};
    padding: {{ padding_vertical }}px {{ padding_horizontal }}px;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-decoration: none;
    text-transform: none;
    border: 2px solid #7B92C8;
    border-radius: 8px;
    color: #7B92C8;
    background: transparent;
    cursor: pointer;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    z-index: 1;
    margin-top: {{ margin_top }}px;
    margin-bottom: {{ margin_bottom }}px;
    {% if full_width_mobile %}
      width: 100%;
    {% else %}
      width: fit-content;
    {% endif %}
  }

  .mm-style-btn-{{ unique_id }}::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #7B92C8 0%, #ddbea8 50%, #f3dfc1 100%);
    background-size: 200% 200%;
    opacity: 0;
    transition: opacity 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: -1;
  }

  .mm-style-btn-{{ unique_id }}:hover::before {
    opacity: 1;
    background-position: 100% 0;
    animation: gradientShift{{ unique_id }} 0.6s ease forwards;
  }

  .mm-style-btn-{{ unique_id }}:hover {
    color: #ffffff !important;
    border-color: transparent !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(123, 146, 200, 0.3);
  }

  @keyframes gradientShift{{ unique_id }} {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }

  @media screen and (max-width: 749px) {
    .mm-style-btn-{{ unique_id }} {
      padding: {{ padding_vertical | times: 0.85 }}px {{ padding_horizontal | times: 0.75 }}px;
      font-size: 14px;
    }
  }
</style>

{%- if button_link != blank -%}
  <a href="{{ button_link }}" {% if open_in_new_tab %}target="_blank"{% endif %} class="mm-style-btn-{{ unique_id }}">
{%- else -%}
  <div class="mm-style-btn-{{ unique_id }}">
{%- endif -%}
  {{ button_label }}
{%- if button_link != blank -%}
  </a>
{%- else -%}
  </div>
{%- endif -%}
